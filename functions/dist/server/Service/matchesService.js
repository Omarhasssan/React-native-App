Object.defineProperty(exports,"__esModule",{value:true});exports.matchesService=undefined;var _firebase=require('../config/firebase');var _firebase2=_interopRequireDefault(_firebase);var _Service=require('../Service');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var _=require('lodash');var matchesService=exports.matchesService={getMatchById:getMatchById,addMatch:addMatch};function addMatch(match){var matchRef=_firebase2.default.database().ref('Matches').push();matchRef.set(match).then(function(){return Promise.resolve(matchRef.key);});}function getMatchById(matchId,teamId){var _this=this;return new Promise(function(resolve,reject){_firebase2.default.database().ref('Matches'+'/'+matchId).once('value',function _callee(snapshot){var match,matchObj;return regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:match=snapshot.toJSON();matchObj={};matchObj.date=match.date;matchObj.location=match.location;if(!(teamId==match.homeTeam)){_context.next=10;break;}_context.next=7;return regeneratorRuntime.awrap(_Service.teamsService.getTeamById(match.awayTeam,'withoutTeamMatches'));case 7:matchObj.opponentTeam=_context.sent;_context.next=13;break;case 10:_context.next=12;return regeneratorRuntime.awrap(_Service.teamsService.getTeamById(match.homeTeam,'withoutTeamMatches'));case 12:matchObj.opponentTeam=_context.sent;case 13:_context.next=15;return regeneratorRuntime.awrap(_Service.usersService.getUserById(match.observer));case 15:matchObj.observer=_context.sent;return _context.abrupt('return',resolve(matchObj));case 17:case'end':return _context.stop();}}},null,_this);});});}