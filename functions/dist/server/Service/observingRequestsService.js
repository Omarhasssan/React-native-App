Object.defineProperty(exports,"__esModule",{value:true});exports.observingRequestsService=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _firebase=require('../config/firebase');var _firebase2=_interopRequireDefault(_firebase);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var _=require('lodash');var observingRequestsService=exports.observingRequestsService={removeObservingRequest:removeObservingRequest,getObservingRequest:getObservingRequest,addObservingRequest:addObservingRequest};function removeObservingRequest(reqId){_firebase2.default.database().ref('ObservingRequests'+'/'+reqId).remove();}function getObservingRequest(roomId,userId){return new Promise(function(resolve,reject){_firebase2.default.database().ref('ObservingRequests').once('value',function(snapshot){var reqs=snapshot.toJSON();for(i in reqs){if(reqs[i].roomId==roomId&&reqs[i].playerId==userId)return resolve(reqs[i]);}});});}function addObservingRequest(Request){var req=_extends({},Request);var requestsRef=_firebase2.default.database().ref('ObservingRequests').push();req.id=requestsRef.key;return requestsRef.set(req).then(function(){return Promise.resolve(req.id);});}